<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BananaPrep - Problem Details</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/problem.css" />
  <link rel="stylesheet" href="css/font.css" />
  <link rel="stylesheet" href="css/terminal.css"/>
  <!-- Import Source Code Pro font explicitly -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600;700&display=swap" />
  <!-- Import Font Awesome for modern icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
  <!-- Header with navigation and action buttons -->
  <header>
    <div class="header-left">
      <a href="index.html">
        <img src="images/bananaprep_logo.png" alt="BananaPrep Logo" class="top-nav"
          onerror="this.style.display='none'; this.parentNode.innerHTML='BananaPrep';" />
      </a>
      <a href="database.html" class="problem-list-btn">
        <span>Problem List</span>
      </a>
      <div class="nav-buttons">
        <button class="nav-btn" id="prevProblemBtn" title="Previous Problem">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="nav-btn" id="nextProblemBtn" title="Next Problem">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
    <div class="header-center">
      <div class="action-buttons">
        <button id="runBtn" class="btn-run">
          <span id="runSpinner" class="spinner"></span>
          <i class="fas fa-play"></i>
          <span>Run</span>
        </button>
        <button id="submitBtn" class="btn-submit">
          <span id="submitSpinner" class="spinner"></span>
          <i class="fas fa-check"></i>
          <span>Submit</span>
        </button>
      </div>
    </div>
    <div class="header-right">
      <span class="user-status" id="problemStatus">Unsolved</span>
      <div id="userAccountSection">
        <a href="login.html" class="user-status">Sign in</a>
      </div>
    </div>
  </header>

  <!-- Main content area -->
  <main>
    <!-- Left Panel: Problem Description -->
    <div class="problem-section">
      <div class="tabs-container">
        <div class="tab active">
          <i class="tab-icon fas fa-file-alt"></i>
          <span>Description</span>
        </div>
        <div class="tab">
          <i class="tab-icon fas fa-pen-nib"></i>
          <span>Editorial</span>
        </div>
        <div class="tab">
          <i class="tab-icon fas fa-comments"></i>
          <span>Solutions</span>
        </div>
      </div>

      <div class="problem-content" id="problemContent">
        <div class="content-card">
          <div class="problem-title-card">
            <span class="problem-title" id="problemTitle">Loading problem...</span>
            <span class="difficulty-tag" id="difficultyTag">Easy</span>
          </div>
          <div class="problem-description" id="problemDescription">
            Loading problem description...
          </div>
          <div id="problemImageContainer" class="problem-image-container">
            <!-- Image will be inserted here by JavaScript -->
          </div>
        </div>
        <div class="content-card examples-section">
          <div class="section-title">Examples</div>
          <div id="problemExamples">
            <!-- Examples will be generated by JavaScript -->
            <div class="example">
              <div class="example-row">
                <div class="example-label">Loading examples...</div>
              </div>
            </div>
          </div>
        </div>

        <div class="content-card constraints-section">
          <div class="section-title">Constraints</div>
          <ul class="constraints-list" id="problemConstraints">
            <li>Loading constraints...</li>
          </ul>
        </div>
      </div>

      <!-- Resize handle for horizontal adjustment -->
      <div class="resize-handle-horizontal" id="horizontalResizeHandle"></div>
    </div>

    <!-- Right Panel: Code Editor -->
    <div class="editor-section">
      <div class="tabs-container">
        <div class="tab active">
          <i class="tab-icon fas fa-code"></i>
          <span>Code</span>
        </div>
        <div class="tab">
          <i class="tab-icon fas fa-vial"></i>
          <span>Testcase</span>
        </div>
      </div>

      <!-- Code container with editor -->
      <div class="code-container">
        <!-- Custom code editor display that resembles the image -->
        <div id="codeEditor" class="code-editor"></div>
      </div>

      <!-- NEW: Terminal output section with resize handle -->
      <div class="terminal-section" id="terminalSection">
        <div class="resize-handle-vertical" id="verticalResizeHandle"></div>
        <div class="terminal-header">
          <div class="terminal-title">
            <i class="fas fa-terminal"></i>
            <span>Output</span>
          </div>
          <div class="terminal-actions">
            <i class="fas fa-trash-alt" id="clearTerminal" title="Clear Terminal"
              style="cursor: pointer; font-size: 0.9rem; color: #aaa;"></i>
          </div>
        </div>
        <div class="terminal-content" id="terminalOutput">Run your code to see the output here.</div>
      </div>
    </div>
  </main>

  <!-- Status bar -->
  <div class="status-bar">
    <div class="status-right">BananaPrep Â© 2025</div>
  </div>

  <!-- Hidden elements preserved for JavaScript functionality -->
  <div id="authPrompt" style="display: none"></div>
  <div class="solution-tabs">
    <div class="tab" id="answerTab"></div>
    <div class="tab" id="codeTab"></div>
  </div>
  <div class="tab-content" id="answerSection"></div>
  <div class="tab-content" id="codeSection"></div>

  <!-- Alert messages -->
  <div class="alert alert-danger" id="errorAlert"></div>
  <div class="alert alert-success" id="successAlert"></div>

  <!-- Scripts -->
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="js/ace-init.js"></script>
  <script type="module" src="js/main.js"></script>
  <!-- Additional script to integrate problem navigation, resizing, and our new loading mechanism -->